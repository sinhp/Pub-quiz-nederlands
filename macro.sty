\usepackage{amsmath, amsfonts, amsthm, amssymb, faktor, amsmath, stmaryrd, mathrsfs, etoolbox, eucal}
%\usepackage{mathabx} % for use of \widecheck
%\usepackage{dsfont}
\usepackage{bbm}
\usepackage{mathtools}
%\usepackage{Alegreya}
%\usepackage{latexsym, eucal, amscd}
%\usepackage[colorinlistoftodos]{todonotes}
\usepackage{xr}
\usepackage{xfrac}  
\usepackage[color,matrix,arrow]{xy}
\usepackage{xspace}
\usepackage{graphics}
\usepackage{pifont}
\usepackage{graphicx}
\usepackage{psfrag} % Necessary to put latex into .eps text fragments
%\usepackage{epstopdf} % compiles eps to pdf first. BUT: it conflicts with auto-pst-pdf !
% \usepackage[usenames, dvipsnames]{color}
\usepackage[active]{srcltx} %This  package  provides  source  special  insertion  into  DVI  files,  allowing  tojump from the DVI file to the.texsource and back (given a DVI viewerthat supports this). Additionally, it provides hooks for error tracking fromthe.logfile for the WinEdt shell
\usepackage{url}
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{matrix,arrows,shapes,decorations.markings,decorations.pathreplacing}
\tikzset{rewritenode/.style={shape=circle,draw,minimum size=1em}}
\tikzset{
	RWopen/.style={shape=circle,draw=black,fill=white,scale=0.5,font=\Huge}
}
\tikzset{
	RWclosed/.style={shape=circle,fill=black,scale=0.5,font=\Huge}
}
\tikzset{CDnode/.style={shape=circle,fill=white,scale=.5}}
\tikzset{->-/.style={decoration={markings,mark=at position .5 with {\arrow{>}}},postaction={decorate}}}


%% arrowhead in the middle
%https://tex.stackexchange.com/questions/39278/tikz-arrowheads-in-the-center?noredirect=1&lq=1
\usetikzlibrary{decorations.markings}
\tikzset{-x>-/.style={decoration={
  markings,
  mark=at position #1 with {\arrow{>}}},postaction={decorate}}}

\usetikzlibrary{calc}
\usepackage{verbatim}
%\usepackage[active,tightpage]{preview}
\usepackage{ragged2e}
\usepackage{epigraph}
\usepackage{xypic}
\xyoption{2cell}
\UseAllTwocells
\usepackage{upgreek}
\usepackage{multicol}
\usepackage{mathpartir} % for inferrule
\usepackage{xr-hyper} %The package describes itself as a development version of the standard package xr; it can create hyperlinks to the external documents that are cross-referenced
\usetikzlibrary{matrix}
\usepackage{media9}
\usepackage{xcolor}
\usepackage{float}
\usepackage{dirtytalk}
\usepackage{romannum}
\usepackage[T1]{fontenc}
\usepackage{ wasysym }
\usepackage{stackrel}
\usetikzlibrary{arrows,positioning,automata,shadows,fit,shapes,decorations.pathmorphing} 
\usepackage{leftidx} %Left and right subscripts and superscripts are raised
\usepackage{booktabs} % Allows the use of \toprule, \midrule and \bottomrule in tables
\usepackage{bbm}
%\usepackage{stackengine}

%\usepackage{strdiag}

\newcommand\ytl[2]{
\parbox[b]{8em}{\hfill{\color{schoolcol}\bfseries\sffamily #1}~$\cdots$~}\makebox[0pt][c]{$\bullet$}\vrule\quad \parbox[c]{4.5cm}{\vspace{7pt}\color{red!40!black!80}\raggedright\sffamily #2.\\[7pt]}\\[-3pt]}

\definecolor{remcol}{HTML}{6133FF}
\definecolor{schoolcol}{rgb}{.192,.365,.506}

% \hypersetup{%
%   pdftoolbar=   true,
%   pdfmenubar=   true,
%   pdffitwindow= true,
%   pdftitle=     {},
%   pdfauthor=    {Sina Hazratpour},
%   colorlinks=   true,
%   linkcolor=    schoolcol,
%   citecolor=    schoolcol, 
%   urlcolor=     schoolcol 
% }
%\DeclareTextFontCommand{\textrmup}{\rmfamily\mdseries\upshape}
%\DeclareTextFontCommand{\textbfup}{\rmfamily\bfseries\upshape}
%\DeclareTextFontCommand{\textttup}{\ttfamily\mdseries\upshape}
%\DeclareTextFontCommand{\textsfup}{\sffamily\mdseries\upshape}
%\newcommand{\strong}[1]{\textbfup{#1}}

\makeatletter
\def\abbrdot{\@ifnextchar.{}{.\@\xspace}}
\makeatother
\newcommand{\etc}{etc\abbrdot}
\newcommand{\eg}{e.g\abbrdot}
\newcommand{\cf}{e.g\abbrdot}
\newcommand{\ie}{i.e\abbrdot}
\newcommand{\resp}{resp\abbrdot} %respectively
\newcommand{\confer}{cf\abbrdot} 
\newcommand{\loccit}{loc.\@ cit\abbrdot} %
\newcommand{\opcit}{op.\@ cit\abbrdot} %opus citatum
\newcommand{\ifaif}{iff\xspace}
\newcommand{\aka}{aka\xspace}
\makeatletter
\let\ea\expandafter
%%%%%%%%%% Concise commands for FONTS and DECORATIONS: (\mathcal{-}, \mathscr{-}, \mathbb{-}, \mathfrak{-}, overbar, underbar)
\newcount\foreachcount

\def\foreachletter#1#2#3{\foreachcount=#1
  \ea\loop\ea\ea\ea#3\@alph\foreachcount
  \advance\foreachcount by 1
  \ifnum\foreachcount<#2\repeat}

\def\foreachLetter#1#2#3{\foreachcount=#1
  \ea\loop\ea\ea\ea#3\@Alph\foreachcount
  \advance\foreachcount by 1
  \ifnum\foreachcount<#2\repeat}

% fraktur: \fa = \mathfrak{a}, except for \fi; also,\fA =\mathfrak{A}
\def\definefrak#1{\ea\gdef\csname f#1\endcsname{\ensuremath{\mathfrak{#1}}\xspace}}
\foreachletter{1}{9}{\definefrak}
\foreachletter{10}{27}{\definefrak}
\foreachLetter{1}{27}{\definefrak}

% blackboard bold: \bbA = \mathbb{A}
\def\definebb#1{\ea\gdef\csname bb#1\endcsname{\ensuremath{\mathbb{#1}}\xspace}}
\foreachLetter{1}{27}{\definebb}

% blackboard bold: \bbmA = \mathbbm{A}
%\def\definebbm#1{\ea\gdef\csname bbm#1\endcsname{\ensuremath{\mathbbm{#1}}\xspace}}
%\foreachletter{1}{27}{\definebbm}

% calligraphic: \cA = \mathcal{A} % for categories 
\def\definecal#1{\ea\gdef\csname c#1\endcsname{\ensuremath{\mathcal{#1}}\xspace}}
\foreachLetter{1}{27}{\definecal}

%for externalisation of internal categories   %\extintA   %% 
\def\defineextint#1{\ea\gdef\csname extint#1\endcsname{\ensuremath{\widetilde{\mathbb{#1}}}\xspace}}
\foreachLetter{1}{27}{\defineextint}

%for internal categories   %\icA = \mathbb{A}  %% 
\def\definebb#1{\ea\gdef\csname ic#1\endcsname{\ensuremath{\mathbb{#1}}\xspace}}
\foreachLetter{1}{27}{\definebb}

% Euler script: \tA = \mathscr{A} for toposes
\def\defineEuscr#1{\ea\gdef\csname t#1\endcsname{\ensuremath{\mathscr{#1}}\xspace}}
\foreachLetter{1}{27}{\defineEuscr}

% for bicategories %\ccA = \mathfrak{A} %%
\def\definefrak#1{\ea\gdef\csname cc#1\endcsname{\ensuremath{\mathfrak{#1}}\xspace}}
\foreachletter{1}{9}{\definefrak}
\foreachletter{10}{27}{\definefrak}
\foreachLetter{1}{27}{\definefrak}

% for tricategories %\cccA = \mathbf{A} %%
\def\definebf#1{\ea\gdef\csname ccc#1\endcsname{\ensuremath{\mathbf{#1}}\xspace}}
\foreachletter{1}{9}{\definebf}
\foreachletter{10}{27}{\definebf}
\foreachLetter{1}{27}{\definebf}

% blackboard: \obA = \mathrm{Ob}(\mathsf{A}) for objects of internal categories
\def\definecal#1{\ea\gdef\csname ob#1\endcsname{\ensuremath{\mathrm{Ob}(\mathbb{#1})}\xspace}}
\foreachLetter{1}{27}{\definecal}

% blackboard: \morA = \mathrm{Mor}(\mathsf{A}) for objects of internal categories
\def\definecal#1{\ea\gdef\csname mor#1\endcsname{\ensuremath{\mathrm{Mor}(\mathbb{#1})}\xspace}}
\foreachLetter{1}{27}{\definecal}

% calligraphic: \CA = \mathcal{A} % for categories 
\def\definecal#1{\ea\gdef\csname C#1\endcsname{\ensuremath{\mathcal{#1}}\xspace}}
\foreachLetter{1}{27}{\definecal}

% fraktur: \KA = \mathfrak{A} % for bicategories
\def\definefrak#1{\ea\gdef\csname K#1\endcsname{\ensuremath{\mathfrak{#1}}\xspace}}
\foreachletter{1}{9}{\definefrak}
\foreachletter{10}{27}{\definefrak}
\foreachLetter{1}{27}{\definefrak}

% Euler script: \sA = \mathscr{A} 
\def\defineEuscr#1{\ea\gdef\csname s#1\endcsname{\ensuremath{\mathscr{#1}}\xspace}}
\foreachLetter{1}{27}{\defineEuscr}

% overbar: \Aobar = \overline{A}, \aobar = \overline{a}
\def\defineobar#1{\ea\gdef\csname #1obar\endcsname{\ensuremath{\overline{#1}}\xspace}}
\foreachLetter{1}{27}{\defineobar}
\foreachletter{1}{27}{\defineobar} 

% underbar: \Aubar = \underline{A}, \aubar = \underline{a}
\def\defineubar#1{\ea\gdef\csname #1ubar\endcsname{\ensuremath{\underline{#1}}\xspace}}
\foreachLetter{1}{27}{\defineubar}
\foreachletter{1}{27}{\defineubar} 

% blacktriangledown 
\def\definetri#1{\ea\gdef\csname #1tri\endcsname{\ensuremath{\stackrel[]{\blacktriangledown}{#1}{}}\xspace}}
\foreachLetter{1}{27}{\definetri}
\foreachletter{1}{27}{\definetri}

\newcommand{\tri}[1]{\ensuremath{\stackrel[]{\blacktriangledown}{#1}{}}}
\newcommand{\tricell}[1]{\lang \overline{#1},\tri{#1},\underline{#1} 
\rang}

% tildes %atil = \widetilde{a}
\def\definetil#1{\ea\gdef\csname #1til\endcsname{\ensuremath{\widetilde{#1}}\xspace}}
\foreachLetter{1}{27}{\definetil}
\foreachletter{1}{27}{\definetil} 

\newcommand{\dbtilde}[1]{\tilde{\raisebox{1pt}[1.05\height]{$\tilde{#1}$}}}


% sketch nodes $bsk = \san{b} %%\ask
\def\defineskstuff#1{\ea\gdef\csname #1sk\endcsname{\ensuremath{\san{#1}}\xspace}}
\foreachLetter{1}{27}{\defineskstuff}
\foreachletter{1}{27}{\defineskstuff} 

% Blackboard Bold: \dA is \mathbb{A}  % for double cats
\def\definebb#1{\ea\gdef\csname d#1\endcsname{\ensuremath{\mathbb{#1}}\xspace}}
\foreachLetter{1}{27}{\definebb}

% Particular commands for typefaces, sometimes with the first letter
% different.
\def\autofmt@b#1\autofmt@end{\mathbf{#1}}
\def\autofmt@d#1#2\autofmt@end{\mathbb{#1}\mathsf{#2}}
\def\autofmt@c#1#2\autofmt@end{\mathcal{#1}\mathit{#2}}
\def\autofmt@u#1\autofmt@end{\underline{\smash{\mathsf{#1}}}}



%%%%%%%%%%%% Arrows
% \to already exists
%-------------------arrows---------------------
\newcommand{\To}{\Rightarrow}
\newcommand{\TO}{\Rrightarrow}
\newcommand{\toto}{\ensuremath{\rightrightarrows}}
%\newcommand{\ToTo}{\ensuremath{\RightRightarrows}}
\newcommand{\toot}{\ensuremath{\rightleftarrows}}
\newcommand{\into}{\ensuremath{\hookrightarrow}}
\newcommand{\toin}{\ensuremath{\hookleftarrow}}
\newcommand{\mono}{\ensuremath{\rightarrowtail}}
\newcommand{\subob}{\mono}
\newcommand{\rightarrowdbl}{\rightarrow\mathrel{\mkern-14mu}\rightarrow}
\newcommand{\epi}{\rightarrowdbl}
\newcommand{\biimpl}{\ensuremath{\Leftrightarrow}}
\newcommand{\too}[1][]{\ensuremath{\overset{#1}{\longrightarrow}}}
\newcommand{\oot}[1][]{\ensuremath{\overset{#1}{\longleftarrow}}}
\let\xto\xrightarrow
\def\toiso{\xto{\smash{\raisebox{-.5mm}{$\scriptstyle\sim$}}}}
\newcommand{\midto}{\ensuremath{\,\mathaccent\shortmid\rightarrow\,}}
\newcommand{\sTo}[2]{\ensuremath{\underset{#1}{\overset{#2}{\Longrightarrow}}}}
\newcommand{\xtoto}[2]{\ensuremath{\underset{#2}{\overset{#1}{\rightrightarrows}}}}

\makeatletter
\providecommand*{\twoheadrightarrowfill@}{%
  \arrowfill@\relbar\relbar\twoheadrightarrow
}
\providecommand*{\twoheadleftarrowfill@}{%
  \arrowfill@\twoheadleftarrow\relbar\relbar
}
\providecommand*{\xtwoheadrightarrow}[2][]{%
  \ext@arrow 0579\twoheadrightarrowfill@{#1}{#2}%
}
\providecommand*{\xtwoheadleftarrow}[2][]{%
  \ext@arrow 5097\twoheadleftarrowfill@{#1}{#2}%
}
\makeatother

\newcommand{\raw}{\rightarrow}
\newcommand{\xraw}{\xrightarrow}
\newcommand{\law}{\leftarrow}
\newcommand{\xlaw}{\xleftarrow}
\newcommand{\Raw}{\Rightarrow}
\makeatletter
\newcommand{\xRaw}[2][]{\ext@arrow 0359\Rightarrowfill@{#1}{#2}}
\makeatother
\newcommand{\xTo}{\xRaw}
\newcommand{\isoTo}{\xRaw[]{\sim}}
\newcommand{\xisoTo}[1]{\xRaw[#1]{\sim}}
\newcommand{\xisoTorev}[1]{\xLaw[#1]{\sim}}
\newcommand{\Law}{\Leftarrow}
\makeatletter
\newcommand{\xLaw}[2][]{\ext@arrow 0359\Leftarrowfill@{#1}{#2}}
\makeatother


%\newcommand\loopar[2]{\stackengine{-.1ex}{#1}{\stackon[.5pt]{\CAL}{\scriptsize #2}}{O}{c}{F}{T}{L}}
%\newcommand\CAL{\scalebox{1.7}{\rotatebox[origin=center]{170}{$\circlearrowleft$}}}
%\stackMath

% defining arrow with a vertical line through it
\makeatletter
\def\slashedarrowfill@#1#2#3#4#5{%
	$\m@th\thickmuskip0mu\medmuskip\thickmuskip\thinmuskip\thickmuskip
	\relax#5#1\mkern-7mu%
	\cleaders\hbox{$#5\mkern-2mu#2\mkern-2mu$}\hfill
	\mathclap{#3}\mathclap{#2}%
	\cleaders\hbox{$#5\mkern-2mu#2\mkern-2mu$}\hfill
	\mkern-7mu#4$%
}
\def\rightslashedarrowfill@{%
	\slashedarrowfill@\relbar\relbar\mapstochar\rightarrow}
\newcommand{\xslashedrightarrow}[2][]{%
	\ext@arrow 0055{\rightslashedarrowfill@}{#1}{#2}}
\makeatother
\newcommand{\hto}{\xslashedrightarrow{}}

% https://tex.stackexchange.com/questions/324471/combination-of-arrows-with-and-without-label
% \usepackage{stackengine,scalerel,graphicx,trimclip,amsmath,wasysym}
% \savestack\zigzagtextstyle{\vphantom{()}\scalebox{.86666}[1]{\kern-.5pt\AC\kern-.5pt}}
% \newcommand\fXarrowtextstyle[2]{$\vphantom{()}\smash{\vcenter{\hbox{\kern-.03\repwidth%
%   \clipbox{-.03\repwidth{} 0pt .527\repwidth{} 0pt}{#1}}}}#2$}
% \newcommand\rightarrowhead{\clipbox{4pt -2pt 0pt -2pt}{$\rightarrow$}}
% \savestack\fzigarrowtextstyle{\fXarrowtextstyle{\zigzagtextstyle}{\rightarrowhead}}
% \newcommand\zigzag{\scalerel*{\zigzagtextstyle}{()}}
% \newcommand\fzigarrow{\scalerel*{\fzigarrowtextstyle}{()}}
% \newcommand\zigzagarrow[1][]{\Xarrow{\zigzag}{\fzigarrow}{#1}{}}

\usepackage{centernot}
\makeatletter
\newcommand{\xMapsto}[2][]{\ext@arrow 0599{\Mapstofill@}{#1}{#2}}
\def\Mapstofill@{\arrowfill@{\Mapstochar\Relbar}\Relbar\Rightarrow}
\makeatother

\newcommand{\Ncell}{\rotatebox[origin=c]{0}{$\Uparrow$}} % treated as the others, for uniform size
\newcommand{\NEcell}{\rotatebox[origin=c]{135}{$\Downarrow$}} % North-East oriented 2-cell arrow
\makeatletter
\newcommand{\xNEcell}[2][]{\rotatebox[origin=c]{45}{$\ext@arrow 0359\Rightarrowfill@{#1}{#2}$}}
\makeatother
\newcommand{\NWcell}{\rotatebox[origin=c]{-135}{$\Downarrow$}} % North-West oriented 2-cell arrow
\makeatletter
\newcommand{\xNWcell}[2][]{\rotatebox[origin=c]{135}{$\ext@arrow 0359\Rightarrowfill@{#1}{#2}$}}
\makeatother
\newcommand{\oEcell}[1]{\overset{\scriptstyle #1}{\Ecell}} % to be used ONLY for 2-cells in xypic diagrams [I]
\newcommand{\oWcell}[1]{\overset{\scriptstyle #1}{\Wcell}} % same, but for Wcell
\newcommand{\Scell}{\rotatebox[origin=c]{0}{$\Downarrow$}} % treated as the others, for uniform size
\newcommand{\SWcell}{\rotatebox[origin=c]{-45}{$\Downarrow$}} % South-West oriented
\makeatletter
\newcommand{\xSWcell}[2][]{\rotatebox[origin=c]{45}{$\ext@arrow 0359\Leftarrowfill@{#1}{#2}$}}
\makeatother
\newcommand{\Wcell}{\rotatebox[origin=c]{90}{$\Uparrow$}} % treated as the others, for uniform size
\makeatletter
\newcommand{\xWcell}[2][]{\rotatebox[origin=c]{180}{$\ext@arrow 0359\Rightarrowfill@{#1}{#2}$}}
\makeatother
\newcommand{\qquadtext}[1]{\qquad\textrm{#1}\qquad}
\newcommand{\quadtext}[1]{\quad\textrm{#1}\quad}
%------------------------------------------------------------------ raise superscript
\makeatletter
\newcommand{\raisemath}[1]{\mathpalette{\raisem@th{#1}}}
\newcommand{\raisem@th}[3]{\raisebox{#1}{$#2#3$}}
\makeatother
\newcommand{\subscript}[2]{$#1 #2$}
\newcommand{\maps}{\colon}
\newcommand{\eqdef}{\ensuremath{\mathrel{:=}}}
\newcommand{\pbprod}{\mathbin{\square}}
\newcommand{\cotens}{\mathbin{\pitchfork}}
\newcommand{\cotensor}{\mathbin{\pitchfork}}
\newcommand{\bigslant}[2]{{\raisebox{.2em}{$#1$}\left/\raisebox{-.2em}{$#2$}\right.}}
\newcommand{\bslant}[2]{{\left.\raisebox{.2em}{$#1$}\middle/\raisebox{-.2em}{$#2$}\right.}}
\newcommand{\baseS}{\CS}

\newcommand{\cd}[2][]{\vcenter{\hbox{\xymatrix#1{#2}}}}
\newcommand{\pullbackcorner}[1][dr]{\save*!/#1+1.2pc/#1:(1,-1)@^{|-}\restore}
\newcommand{\pushoutcorner}[1][dr]{\save*!/#1-1.2pc/#1:(-1,1)@^{|-}\restore}
\newcommand{\pullbackcornerr}[1][dr]{\save*!/#1+1.3pc/#1:(1,-1)@^{|-}\restore}
\newcommand{\pushoutcornerr}[1][dr]{\save*!/#1-1.3pc/#1:(-1,1)@^{|-}\restore}


%%
%%%%%%%%% Upward 2-arrow /\
%%                       ||
\newcommand{\fup}{f\mathord{\Uparrow}}
\newcommand{\fhup}{\hat{f}\mathord{\Uparrow}}
\newcommand{\alup}{\alpha\mathord{\Uparrow}}
\newcommand{\betup}{\beta\mathord{\Uparrow}}
\newcommand{\rhoup}{\rho\mathord{\Uparrow}}
\newcommand{\Fiup}{\Phi\mathord{\Uparrow}}
\newcommand{\Fipup}{\Phi_p \mathord{\Uparrow}}
\newcommand{\fiup}{\phi\mathord{\Uparrow}}
\newcommand{\fipup}{\phi_p\mathord{\Uparrow}}
\newcommand{\fiprmup}{\phi'\mathord{\Uparrow}}
\newcommand{\sigobardar}{\sigobar\mathord{\Uparrow}}
\newcommand{\fiprup}{\phi'\mathord{\Uparrow}}
\newcommand{\zetup}{\zeta\mathord{\Uparrow}}
\newcommand{\idup}{\id\mathord{\Uparrow}}
\newcommand{\etup}{\eta\mathord{\Uparrow}}
\newcommand{\delup}{\delta\mathord{\Uparrow}}
\newcommand{\delpup}{\delta_p\mathord{\Uparrow}}
\newcommand{\delfup}{\delta_f\mathord{\Uparrow}}
\newcommand{\tauup}{\tau\mathord{\Uparrow}}
\newcommand{\tauoneup}{\tau_1\mathord{\Uparrow}}
\newcommand{\tauonepup}{\tau_1(p)\mathord{\Uparrow}}
%%%% Downward 2-Arrows 
\newcommand{\dar}[1]{{#1}\mathord{\Downarrow}}
\newcommand{\fdar}{\tri{f} \mathord{\Downarrow}}
\newcommand{\fcdar}{\check{f}\mathord{\Downarrow}}
\newcommand{\fhdar}{\hat{f}\mathord{\Downarrow}}
\newcommand{\ucdar}{\check{u}\mathord{\Downarrow}}
\newcommand{\uhdar}{\check{u}\mathord{\Downarrow}}
\newcommand{\fpdar}{f_p\mathord{\Downarrow}}
\newcommand{\gdar}{\tri{g}\mathord{\Downarrow}}
\newcommand{\hdar}{\tri{h}\mathord{\Downarrow}}
\newcommand{\kdar}{\tri{k}\mathord{\Downarrow}}
\newcommand{\ldar}{\tri{l}\mathord{\Downarrow}}
\newcommand{\vdar}{\tri{v}\mathord{\Downarrow}}
\newcommand{\xdar}{\tri{x}\mathord{\Downarrow}}
\newcommand{\iddar}{\id\mathord{\Downarrow}}
\newcommand{\zetinvdar}{\zeta^{-1}\mathord{\Downarrow}}
\newcommand{\taudarz}{\tau_0\mathord{\Downarrow}}
\newcommand{\taudarone}{\tau_1\mathord{\Downarrow}}
\newcommand{\etdar}{\eta\mathord{\Downarrow}}
\newcommand{\etprdar}{\eta' \mathord{\Downarrow}}
\newcommand{\etdblprdar}{\eta'' \mathord{\Downarrow}}
\newcommand{\epdar}{\ep\mathord{\Downarrow}}
\newcommand{\epprdar}{\ep'\mathord{\Downarrow}}
\newcommand{\epsdar}{\epsilon\mathord{\Downarrow}}
\newcommand{\epsprdar}{\epsilon'\mathord{\Downarrow}}
\newcommand{\rhodar}{\rho\mathord{\Downarrow}}
\newcommand{\aldar}{\alpha\mathord{\Downarrow}}
\newcommand{\alprdar}{\alpha'\mathord{\Downarrow}}
\newcommand{\alodar}{\alobar\mathord{\Downarrow}}
\newcommand{\alpdar}{\alpha_p\mathord{\Downarrow}}
\newcommand{\sigdar}{\sigma\mathord{\Downarrow}}
\newcommand{\betdar}{\beta\mathord{\Downarrow}}
\newcommand{\betodar}{\betobar\mathord{\Downarrow}}
\newcommand{\betpdar}{\beta_p\mathord{\Downarrow}}
\newcommand{\tetdar}{\theta\mathord{\Downarrow}}
\newcommand{\scrtetdar}{{\scriptstyle \theta}\mathord{\Downarrow}}
\newcommand{\tetfdar}{\theta_f\mathord{\Downarrow}}
\newcommand{\zetdar}{\zeta\mathord{\Downarrow}}
\newcommand{\gamdar}{\gamma\mathord{\Downarrow}}
\newcommand{\phidar}{\phi\mathord{\Downarrow}}
\newcommand{\phiprdar}{\phi'\mathord{\Downarrow}}
\newcommand{\phidarswap}{\mathord{\Downarrow}\phi}
\newcommand{\varphidar}{\varphi\mathord{\Downarrow}}
\newcommand{\varphiprdar}{\varphi'\mathord{\Downarrow}}
\newcommand{\varphidarswap}{\mathord{\Downarrow}\varphi}
\newcommand{\psidar}{\psi\mathord{\Downarrow}}
\newcommand{\psidarswap}{\mathord{\Downarrow}\psi}
\newcommand{\psiprdar}{\psi'\mathord{\Downarrow}}
\newcommand{\lamdar}{\lambda\mathord{\Downarrow}}

\newcommand{\ftdar}{\tri{f} \mathord{\Downarrow}}
\newcommand{\fmid}{\tri{f}}
\newcommand{\gtdar}{\tri{g} \mathord{\Downarrow}}
\newcommand{\gmid}{\tri{g}}
\newcommand{\htdar}{\tri{h} \mathord{\Downarrow}}
\newcommand{\hmid}{\tri{h}}
\newcommand{\hztdar}{\tri{h_0} \mathord{\Downarrow}}
\newcommand{\hzmid}{\tri{h_0}}
\newcommand{\xtdar}{\tri{x} \mathord{\Downarrow}}
\newcommand{\xmid}{\tri{x}}
\newcommand{\ytdar}{\tri{y} \mathord{\Downarrow}}
\newcommand{\ymid}{\tri{y}}
\newcommand{\rfdnar}{\tri{r_{f}}\mathord{\Downarrow}}
%\newcommand{\rfmid}{\tri{r_{f}}\mathord{\Downarrow}}
\newcommand{\raldnar}{\tri{r_{\alpha}}\mathord{\Downarrow}}
\newcommand{\elaldnar}{\tri{\ell_{\alpha}}\mathord{\Downarrow}}
\newcommand{\rbetdnar}{\tri{r_{\beta}}\mathord{\Downarrow}}
\newcommand{\elbetdnar}{\tri{\ell_{\beta}}\mathord{\Downarrow}}
\newcommand{\ralupar}{\tri{r_{\alpha}}\mathord{\Uparrow}}
\newcommand{\elalupar}{\tri{\ell_{\alpha}}\mathord{\Uparrow}}
\newcommand{\rbetupar}{\tri{r_{\beta}}\mathord{\Uparrow}}
\newcommand{\elbetupar}{\tri{\ell_{\beta}}\mathord{\Uparrow}}

%%%% Upper bar
\newcommand{\alobar}{\ensuremath{\overline{\alpha}}}
\newcommand{\betobar}{\ensuremath{\overline{\beta}}}
\newcommand{\gamobar}{\ensuremath{\overline{\gamma}}}
\newcommand{\delobar}{\ensuremath{\overline{\delta}}}
\newcommand{\sigobar}{\ensuremath{\overline{\sigma}}}
\newcommand{\chiobar}{\ensuremath{\overline{\chi}}}
\newcommand{\iotobar}{\ensuremath{\overline{\iota}}}
\newcommand{\muobar}{\ensuremath{\overline{\mu}}}
\newcommand{\tetobar}{\ensuremath{\overline{\theta}}}
\newcommand{\fiobar}{\ensuremath{\overline{\varphi}}}
\newcommand{\psiobar}{\ensuremath{\overline{\psi}}}
\newcommand{\vfiobar}{\ensuremath{\overline{\varphi}}}
\newcommand{\rhoobar}{\ensuremath{\overline{\rho}}}
\newcommand{\kapobar}{\ensuremath{\overline{\kappa}}}

\newcommand{\err}{r}
\newcommand{\rftop}{\ensuremath{\overline{r_f}}}
\newcommand{\errftop}{\ensuremath{\overline{r_f}}}
\newcommand{\rgtop}{\ensuremath{\overline{r_g}}}
\newcommand{\rhtop}{\ensuremath{\overline{r_h}}}
\newcommand{\raltop}{\ensuremath{\overline{r_{\alpha}}}}
\newcommand{\erraltop}{\ensuremath{\overline{r_{\alpha}}}}
\newcommand{\elaltop}{\ensuremath{\overline{\ell_{\alpha}}}}
\newcommand{\rbettop}{\ensuremath{\overline{r_\beta}}}
\newcommand{\errbettop}{\ensuremath{\overline{r_\beta}}}
\newcommand{\elbettop}{\ensuremath{\overline{\ell_\beta}}}

%%%% Upper bar + triangle 
\newcommand{\errfmid}{\ensuremath{\tri{r_{f}}}}
\newcommand{\errgmid}{\ensuremath{\tri{r_{g}}}}
\newcommand{\errhmid}{\ensuremath{\tri{r_{h}}}}
\newcommand{\erralmid}{\ensuremath{\tri{r_{\alpha}}}}
\newcommand{\elalmid}{\ensuremath{\tri{\ell_{\alpha}}}}
\newcommand{\errbetmid}{\ensuremath{\tri{r_{\beta}}}}
\newcommand{\elbetmid}{\ensuremath{\tri{\ell_{\beta}}}}
\newcommand{\errgammid}{\ensuremath{\tri{r_{\gamma}}}}
\newcommand{\elgammid}{\ensuremath{\tri{\ell_{\gamma}}}}

%%% overline + star
\newcommand{\stbar}[1]{\str{\overline{#1}}}
\newcommand{\strbar}[1]{{\overline{#1}^*}}
\newcommand{\stund}[1]{\str{\underline{#1}}}
\newcommand{\strund}[1]{{\underline{#1}^*}}

%%%% Underbar
\newcommand{\alubar}{\ensuremath{\underline{\alpha}}}
\newcommand{\betubar}{\ensuremath{\underline{\beta}}}
\newcommand{\gamubar}{\ensuremath{\underline{\gamma}}}
\newcommand{\delubar}{\ensuremath{\underline{\delta}}}
\newcommand{\sigubar}{\ensuremath{\underline{\sigma}}}
\newcommand{\iotubar}{\ensuremath{\underline{\iota}}}
\newcommand{\muubar}{\ensuremath{\underline{\mu}}}
\newcommand{\tetubar}{\ensuremath{\underline{\theta}}}
\newcommand{\fiubar}{\ensuremath{\underline{\varphi}}}
\newcommand{\kapubar}{\ensuremath{\underline{\kappa}}}

%%%%%%% theories and sketches
\newcommand{\thO}{\mathbb{O}}
\newcommand{\thS}{\mathbb{S}}
\newcommand{\thT}{\mathbb{T}}
\newcommand{\thU}{\mathbb{U}}
\newcommand{\Th}{\mathbf{Th}}
\newcommand{\boolsk}{\bbB\bbA}
\newcommand{\boolprfiltersk}{\bbB\bbA_{\bullet}}
%%%%%----- Steve's SK-4-AU --------- 
\newcommand{\AU}{\mathbf{AU}}
\newcommand{\AUpres}[1]{\AU\langle #1 \rangle}
\newcommand{\thob}{\mathbb{O}} 
\newcommand{\thobpt}{\mathbb{O}_{\bullet}}
\newcommand{\skext}{\subset}                 % sketch extension
\newcommand{\Sk}{\mathsf{Sk}}                % graph or cat of sketches
\newcommand{\skeqext}{\Subset}               % sketch equivalence extension
\newcommand{\skhom}{\lessdot}              % sketch homomorphism
\newcommand{\skhommap}{\gtrdot}               % sketch homomorphism backwards
\newcommand{\thextmap}{\supset}              % theory extension map
\newcommand{\theqextmap}{\Supset}            % theory equivalence extension map
\newcommand{\thmorphmap}{\gtrdot}            % theory morphism map
\newcommand{\skdiag}{\sim}                   % diagrams in sketches
\newcommand{\skn}{\mathrm{G}^{0}}    % nodes
\newcommand{\sknid}{\mathrm{s}}       % identity
\newcommand{\ske}{\mathrm{G}^{1}}    % edges
\newcommand{\skface}{\mathrm{d}}     % faces (for edges and triangles)
\newcommand{\skedom}{\skface_0}     % domain
\newcommand{\skecod}{\skface_1}     % codomain
\newcommand{\sktri}{\mathrm{G}^{2}}  % diagrams for binary composites
\newcommand{\sktril}{\skface_0}   % first
\newcommand{\sktrir}{\skface_2}   % second
\newcommand{\sktric}{\skface_1}   % composite
\newcommand{\skut}{\mathrm{U}^{\qeqt}} % universals for terminals
\newcommand{\skutn}{\mathrm{tm}}      % terminal node
\newcommand{\skupb}{\mathrm{U}^{\mathrm{pb}}} % universals for pullbacks
\newcommand{\skupbtri}{\Gamma}       % triangle for half of pb square
\newcommand{\skui}{\mathrm{U}^{\qeqi}} % universals for initials
\newcommand{\skuin}{\mathrm{i}}      % initial node
\newcommand{\skupo}{\mathrm{U}^{\mathrm{po}}} % universals for pushouts
\newcommand{\skupotri}{\Gamma}       % triangle for half of po square
\newcommand{\skul}{\mathrm{U}^{\mathrm{list}}} % universals for list objects L = List(A)
\newcommand{\skulpb}{\Lambda_2}      % universal for LxA
\newcommand{\skult}{\Lambda_0}       % universal for terminal
\newcommand{\skule}{\mathrm{e}}      % empty list
\newcommand{\skulcons}{\mathrm{c}}   % cons
\newcommand{\qeqobj}{\mathrm{obj}}          % sort for objects
\newcommand{\qeqarr}{\mathrm{arr}}          % sort for morphisms
\newcommand{\qeqdom}{\mathsf{d}}            % domain
\newcommand{\qeqcod}{\mathsf{c}}            % codomain
\newcommand{\qeqid}{\mathsf{id}}            % identity morphism
\newcommand{\qeqcomp}{\circ}                % composition, binary, applicational order
\newcommand{\qeqt}{1}                 % terminal object
\newcommand{\qeqtfill}{\mathop{!}\nolimits^{\qeqt}}                 % unique morphism to terminal object
\newcommand{\qeqlcons}{\mathop{\mathsf{cons}}}        % cons
\newcommand{\qeqprodproj}{\mathsf{p}}       % projections from product
\newcommand{\qeqproj}[2]{\qeqprodproj_{#1,#2}}% projections from pullback
\newcommand{\qeqpb}[2]{\mathsf{P}_{#1,#2}}             % pullback object
\newcommand{\qeqpbfill}[4]{\left\langle #1, #2 \right\rangle_{#3,#4}} % pullback fillin
\newcommand{\qeqprodfill}[2]{\left\langle #1, #2 \right\rangle} % product fillin
\newcommand{\qeqeq}[2]{\mathsf{eq}_{#1,#2}}  % equalizer morphism for #1,#2
\newcommand{\qeqeqdom}[2]{\mathsf{E}_{#1,#2}}% equalizer object for #1,#2
%\newcommand{\qeqpbu}{\mathsf{u}}            % uniqueness for pullback fillin
\newcommand{\qeqi}{0}              % initial object
\newcommand{\qeqifill}{\mathop{!}\nolimits^{\qeqi}}                 % unique morphism from initial object
\newcommand{\qeqinj}[2]{\mathsf{q}_{#1,#2}} % injections to pushout
\newcommand{\qeqpo}[2]{\mathsf{Q}_{#1,#2}}             % pushout object
\newcommand{\qeqpofill}[4]{\left[ #1, #2 \right]_{#3,#4}} % pushout fillin
%\newcommand{\qeqpou}{\mathsf{v}}            % uniqueness for pushout fillin
\newcommand{\qequc}{\mathsf{uc}}            % unique choice (balance)
\newcommand{\qeqpostab}[3]{\mathsf{stab}_{#1,#2}(#3)} % iso for stability along #3 of pushout of ##1,2
\newcommand{\qeqex}{\mathsf{ex}}            % exactness iso
\newcommand{\qeqle}{\varepsilon}        % empty list

  % old notation from Maietti-Vickers
%\newcommand{\qeqle}{\mathsf{r}_{0}}        % empty list
%\newcommand{\qeqlsnoc}{\mathsf{r}_{1}}    pt    % snoc
\newcommand{\qeql}{\mathsf{List}}           % list object
\newcommand{\qeqlrec}[3]{\mathsf{rec}^{#1}(#2,#3)} % rec (A,b,g)
\newcommand{\qeqlu}[4]{\mathsf{u}^{#1}_{#2,#3}(#4)}        % list uniqueness (A,b,g,r)

%%%%
%\usepackage{bbold}
%\usepackage{bbm}
\newcommand{\thone}{\mathbbm{1}}
%%%%%%%%%% Categories
\newcommand{\cSet}{\mathop{\mathcal{S}\text{et}}}
\newcommand{\cptfinset}{\mathop{\mathcal{F}\text{in}_*}}
\newcommand{\cfinset}{\mathop{\mathcal{S}\text{et}_{\text{fin}}}}
\newcommand{\cat}{\mathop{\mathcal{C}\text{at}}}
\newcommand{\ccat}{\mathop{\mathcal{C}\text{at}}}
\newcommand{\cfun}{\mathop{\mathcal{F}\text{un}}}
\newcommand{\cfam}[1]{\mathop{\mathcal{F}\text{am}}(#1)}
\newcommand{\cpsfun}{\mathop{\mathcal{P}\text{sd}\mathcal{F}\text{un}}}
\newcommand{\claxfun}{\mathop{\mathcal{L}ax\mathcal{F}un}}
\newcommand{\cflatfun}{\mathop{\mathcal{F}lat\mathcal{F}un}}
\newcommand{\cfib}{\mathop{\mathcal{F}ib}}
\newcommand{\copfib}{\mathop{op\mathcal{F}ib}}
\newcommand{\cdfib}{\mathop{d\mathcal{F}\text{ib}}}
\newcommand{\cdofib}{\mathop{do\mathcal{F}\text{ib}}}
\newcommand{\cprefib}{\mathop{\mathcal{P}re\mathcal{F}\text{ib}}}
\newcommand{\cgrp}{\mathop{\mathcal{G}rp}}
\newcommand{\cgrpd}{\mathop{\mathcal{G}rpd}}
\newcommand{\cgray}{\mathop{\mathcal{G}\text{ray}}}
\newcommand{\cabgrp}{\mathop{\mathcal{A}\text{b}}}
\newcommand{\cdistlat}{\mathop{\mathcal{D}\text{ist}\mathcal{L}\text{at}}}
\newcommand{\cbool}{\mathop{\mathcal{B}\text{ool}}}
\newcommand{\cring}{\mathop{\mathcal{R}ing}}
\newcommand{\ccring}{\mathop{\mathcal{C}\text{Ring}}}
\newcommand{\caffsch}{\mathop{\mathcal{A}ff\mathcal{S}ch}}
\newcommand{\cstone}{\mathop{\mathcal{S}tone}}
\newcommand{\cvect}{\mathop{\mathcal{V}ect}}
\newcommand{\cvbdl}{\mathop{\mathcal{V}ect\mathcal{B}un}}
\newcommand{\cfinvect}{\mathop{\mathcal{F}in\mathcal{V}ect}}
\newcommand{\csub}{\mathop{\mathcal{S}\text{ub}}}
\newcommand{\ccore}{\mathop{\mathcal{C}\text{ore}}}

\newcommand{\dcpo}{\mathop{\mathcal{D}cpo}}
\newcommand{\ctopl}{\mathop{\mathcal{T}op}}
\newcommand{\htopl}{\mathop{h\mathcal{T}op}}
\newcommand{\pthtopl}{\mathop{h\mathcal{T}op_{*}}}
\newcommand{\cov}{\mathop{\mathcal{C}ov}}
\newcommand{\geom}{\mathop{\mathcal{G}eom}}
\newcommand{\opengeom}{\mathop{\mathcal{O}pen\mathcal{G}eom}}
\newcommand{\cmon}{\mathop{\mathcal{M}on}}
\newcommand{\cman}{\mathop{\mathcal{M}an}}
\newcommand{\ccmon}{\mathop{\mathcal{C}\mathcal{M}on}}
\newcommand{\cmod}{\mathop{\mathcal{M}\text{od}}}
\newcommand{\cbimod}{\mathop{\mathcal{B}\text{i}\mathcal{M}\text{od}}}
\newcommand{\cshv}{\mathop{\mathcal{S}\text{hv}}}
\newcommand{\cpshv}{\mathop{\mathcal{P}\text{Shv}}}
\newcommand{\bicat}{\mathop{\mathcal{B}\text{i}\mathcal{C}\text{at}}}
\newcommand{\strbicat}{{\mathop{\mathcal{B}\text{i}\mathcal{C}\text{at}}}_{str}}
\newcommand{\laxbicat}{{\mathop{\mathcal{B}\text{i}\mathcal{C}\text{at}}}_{lax}}
\newcommand{\nlaxbicat}{{\mathop{\mathcal{B}\text{i}\mathcal{C}\text{at}}}_{nlax}}
% \newcommand{\cfun}{\mathbf{Fun}}
% \newcommand{\cpsfun}{\mathbf{PsFun}}
% \newcommand{\claxfun}{\mathbf{LaxFun}}
% \newcommand{\cfib}{\mathbf{Fib}}
% \newcommand{\copfib}{\mathbf{opFib}}
% \newcommand{\cdfib}{\mathbf{dFib}}
% \newcommand{\cdofib}{\mathbf{doFib}}
% \newcommand{\cprefib}{\mathbf{PreFib}}
% \newcommand{\FibB}{\ensuremath{\mathbf{Fib}_{\KB}}}
% \newcommand{\cgrp}{\mathbf{Grp}}
% \newcommand{\cring}{\mathbf{Ring}}
% \newcommand{\cabgrp}{\mathbf{Ab}}
% \newcommand{\cgrpd}{\mathbf{Grpd}}
% \newcommand{\ctopl}{\mathbf{Top}}
% \newcommand{\htopl}{\mathbf{hTop}}
% \newcommand{\pthtopl}{\mathbf{hTop_*}}
% \newcommand{\cov}{\mathbf{Cov}}
% \newcommand{\opengeom}{\mathbf{OpenGeom}}
% \newcommand{\cbun}{\mathsf{Bun}} 
% \newcommand{\cgeom}{\mathbf{Geom}}
% \newcommand{\cmod}{\mathbf{Mod}}
% \newcommand{\class}{\mathbf{Cls}}
\newcommand{\clau}[1]{\mathbf{AU}\lang #1 \rang}
\newcommand{\strclau}[1]{\mathbf{AU}_{\text{str}}\lang #1 \rang}
% \newcommand{\cshv}{\mathsf{Shv}}
% \newcommand{\cpshv}{\mathsf{PShv}}
% \newcommand{\cflatfun}{\mathrm{Fun_{flat}}}
% \newcommand{\loopx}[1]{\mathbf{\Omega}#1}
% \newcommand{\cdeloopx}[1]{\mathbf{B}#1}
% \newcommand{\deloopxx}[1]{\mathbf{B}#1}
\newcommand{\synz}[1]{\mathop{\mathcal{S}\!{\textit yn_0}}\nolimits(\mathbb{#1})}
\newcommand{\syn}[1]{\mathop{\mathcal{S}\!{\textit yn}}\nolimits(\mathbb{#1})}
\def\cfrm{\mathop{\mathcal{F}\!{\textit rm}}\nolimits}
\def\Idl{\mathop{\mathcal{I}\!{\textit dl}}\nolimits}
\newcommand{\cone}[3]{\supsub{\mathcal{C}one}{#1}{#2} {#3}}
\newcommand{\laxcone}[3]{\supsub{\mathcal{L}ax\mathcal{C}one}{#1}{#2} {#3}}
%%%%%%%%%% toposes
\newcommand{\tSet}{\mathop{\mathscr{S}\!{\textit et}\nolimits}}
\newcommand{\tfinset}{\mathop{\tSet_{fin}}}
\newcommand{\tdeloopx}[1]{\mathcal{B}#1}
%%%%% 2-categories and bicategories
\newcommand{\Cat}{\mathop{\mathfrak{Cat}}}
\newcommand{\Cart}{\mathop{\mathfrak{Cat}_{\text{cart}}}}
\newcommand{\Dist}{\mathop{\mathfrak{Dist}}}
\newcommand{\CAT}{\mathop{\mathfrak{CAT}}}
\newcommand{\Grpd}{{\mathfrak{Grpd}}}
\newcommand{\lrpCat}{{\mathop{\mathfrak{Cat}_{lrp}}}}
\newcommand{\strMonCat}{{\mathop{\mathfrak{MonCat}}}_{str}}
\newcommand{\MonCat}{{\mathop{\mathfrak{MonCat}}}}
\newcommand{\strongMonCat}{{\mathop{\mathfrak{MonCat}}}_{strong}}
\newcommand{\laxMonCat}{{\mathop{\mathfrak{MonCat}}}_{lax}}
\newcommand{\TriCat}{\mathop{\mathfrak{TriCat}}}
\newcommand{\tricathom}{\mathop{\mathbf{Hom}}}
\newcommand{\icon}{\mathop{\mathbf{Icon}}}
\newcommand{\tricatgray}{\mathop{\mathbf{Gray}}}
\newcommand{\tricatpsd}{{\mathop{\mathbf{2}\Cat}}_{psd}}
\newcommand{\Bimod}{\mathop{\mathfrak{BiMod}}}
\newcommand{\Fib}{\mathop{{\mathfrak{Fib}}}}
\newcommand{\Alg}{\mathop{{\mathfrak{Alg}}}}
\newcommand{\CFG}{\mathop{{\mathfrak{CFG}}}}
\newcommand{\preFib}{\mathop{{\mathrm{pre}\mathfrak{Fib}}}}
\newcommand{\clvFib}{\mathop{{\mathrm{clv}\mathfrak{Fib}}}}
\newcommand{\splFib}{\mathop{{\mathrm{spl}\mathfrak{Fib}}}}
\newcommand{\splnlFib}{\mathop{{\mathrm{splnl}\mathfrak{Fib}}}}
\newcommand{\clvpreFib}{\mathop{{\mathrm{clvpre}\mathfrak{Fib}}}}
\newcommand{\Par}{\mathop{{\mathfrak{Par}}}}
\newcommand{\Mat}{\mathop{{\mathfrak{Mat}}}}
\newcommand{\Rel}{\mathop{{\mathfrak{Rel}}}}
\newcommand{\Span}{\mathop{{\mathfrak{Span}}}}
\newcommand{\opSpan}{\mathop{{\mathfrak{opSpan}}}}
\newcommand{\cccore}{\mathop{{\mathfrak{Core}}}}
\newcommand{\Pos}{{\mathfrak{Poset}}}
\newcommand{\Frm}{\mathop{{\mathfrak{Frm}}}}
\newcommand{\Loc}{\mathop{{\mathfrak{Loc}}}}
\newcommand{\Con}{{\mathfrak{Con}}}
\newcommand{\cyl}[1]{\mathbf{cyl}(#1)}
\newcommand{\isocyl}[1]{\mathbf{cyl}_{\iso}(#1)}
\newcommand{\Topos}{\mathfrak{Top}}
\newcommand{\ETopos}{\mathcal{E}\mathfrak{Top}}
\newcommand{\BTopos}{\mathcal{B}\mathfrak{Top}}
\newcommand{\GTopos}{\mathcal{G}\mathfrak{Top}}
%%% m-categories of n-categories
\newcommand{\diCat}{\mathop{\mathbf{2}\mathfrak{Cat}}}
\newcommand{\strdicat}{{\mathop{\mathbf{2}\cat}}_{str}}
\newcommand{\strgrpddicat}{{\mathop{\mathbf{(2,1)}\cat}}_{str}}
\newcommand{\pscat}{{\mathop{\mathbf{2}\cat}}_{psd}}
\newcommand{\nlaxcat}{{\mathop{\mathbf{2}\cat}}_{nlax}}
\newcommand{\nLaxCat}{{\mathop{\mathbf{2}\Cat}}_{nlax}}
\newcommand{\laxcat}{{\mathop{\mathbf{2}\cat}}_{lax}}
\newcommand{\strdiCat}{{\mathop{\mathbf{2}\Cat}}_{str}}
\newcommand{\strgrpddiCat}{{\mathop{\mathbf{(2,1)}\Cat}}_{str}}
\newcommand{\diCAT}{\mathop{\mathbf{2}\mathfrak{CAT}}}
\newcommand{\triCat}{\mathop{\mathbf{3}\mathfrak{Cat}}}
%%%%% misc
\newcommand{\sierpinski}{\bbS}
\newcommand{\specord}{\sqsubseteq}
\newcommand{\lext}[2]{\mathrm{lan}^{#1}_{#2}}
\newcommand{\rext}[2]{\mathrm{ran}^{#1}_{#2}}
\newcommand{\cdisc}[1]{{#1}^{\mathrm{d}}}
\newcommand{\icdisc}[1]{{#1}^{\mathbbm{d}}}
\newcommand{\ccdisc}[1]{{#1}^{\fd}}
\newcommand{\cindisc}[1]{{#1}^{\mathrm{ind}}}
\newcommand{\icindisc}[1]{{#1}^{\mathbbm{i}\mathbbm{n}\mathbbm{d}}}
\newcommand{\ccindisc}[1]{{#1}^{\mathrm{in}\fd}}
\newcommand{\vect}{\ensuremath{\mathbf{Vec}}}
\newcommand{\finvect}{\ensuremath{\mathbf{FinVec}}}
\newcommand{\coh}{\mathbf{Coh}}
\newcommand{\Str}{\mathbf{Str}}
\newcommand{\strict}[1]{#1_\text{s}}
\newcommand{\Mod}{\mathbf{Mod}}
\newcommand{\Cl}{\mathbf{Cl}}
\newcommand{\Sch}{\mathbf{Sch}}
\newcommand{\Desc}{\mathbf{Desc}}
\newcommand{\cart}{\mathbf{Cart}}
\newcommand{\Gr}{\mathfrak{Gr}}
\newcommand{\Fam}{\mathbb{F}\text{am}}
\newcommand{\graph}{\bbG r}
\def\intHom{\mathop{ \underline{Hom}}\nolimits}
%\def\intHom{\mathop{\rm \underline{Hom}}\nolimits}
\newcommand{\del}{\ensuremath{\partial}}
\newcommand{\fstlaxpb}{\ensuremath{\partial_0}}
\newcommand{\sndlaxpb}{\ensuremath{\partial_1}}
\newcommand{\ev}{\ensuremath{\mathrm{eval}}}
\newcommand{\transpose}{\ensuremath{\widehat}}
% for widecheck: https://tex.stackexchange.com/questions/44235/is-there-a-way-to-do-an-upside-down-widehat
\makeatletter
\DeclareRobustCommand\widecheck[1]{{\mathpalette\@widecheck{#1}}}
\def\@widecheck#1#2{%
    \setbox\z@\hbox{\m@th$#1#2$}%
    \setbox\tw@\hbox{\m@th$#1%
       \widehat{%
          \vrule\@width\z@\@height\ht\z@
          \vrule\@height\z@\@width\wd\z@}$}%
    \dp\tw@-\ht\z@
    \@tempdima\ht\z@ \advance\@tempdima2\ht\tw@ \divide\@tempdima\thr@@
    \setbox\tw@\hbox{%
       \raise\@tempdima\hbox{\scalebox{1}[-1]{\lower\@tempdima\box
\tw@}}}%
    {\ooalign{\box\tw@ \cr \box\z@}}}
\makeatother
\newcommand{\cotranspose}{\ensuremath{\widecheck}}
\newcommand{\trun}[2]{\sub{||#1||}{#2}}
\newcommand{\undcat}[1]{\trun{#1}{1}}
\newcommand{\con}[1]{\vec{#1}}
%\newcommand{\Cart}{\ensuremath{\mathcal{C}\mathit{art}}}
\newcommand{\Sp}{\ensuremath{\mathbb{S}\mathbf{p}}}
\newcommand{\Adj}{\ensuremath{\mathbb{A}\mathbf{dj}}}
\newcommand{\bcod}{\ensuremath{\mathbb{C}\mathbf{od}}} %% bold codomain functor 
\newcommand{\base}{\ensuremath{\mathbb{B}\mathbf{ase}}} %% base of a Grothendieck topos
\newcommand{\bag}{\ensuremath{\mathscr{B}ag}} %% base of a Grothendieck topos
\newcommand{\Barcons}{\ensuremath{\mathbf{Bar}}} %% base of a Grothendieck topos
\newcommand{\num}[1]{\mathbf{#1}} %%% bold numbers
\newcommand{\catg}[1]{\mathbf{#1}} % for finite categories
\newcommand{\ccatg}[1]{\mathbf{#1}} % for basic cats
\newcommand{\yon}{\mbox{\textit{y}}} %% Yoneda embedding
\newcommand{\Yon}{\bbY\text{on}} %% Yoneda embedding
\newcommand{\comp}{\mathrm{c}} %% composition map
\newcommand{\lun}{\lambda} %% left unitor
\newcommand{\run}{\rho} %% right unitor
\newcommand{\ass}{\alpha} %%associator
\newcommand{\fibprod}[2]{\mathop{\leftidx{_{#1}}{\times}{_{#2}}}} %% fibre product with subscripts in the product
%% various commas and cocommas: comma categories, comma objects, comma sketch, comma topos  
\newcommand{\partialprod}[2]{\cP(#1,#2)}
\newcommand{\partialprodfib}[2]{\supsc{\cP}{\bullet}(#1,#2)}
\newcommand{\partialprodopfib}[2]{\sub{\cP}{\bullet}(#1,#2)}
\newcommand*{\ordlr}[3]{\mathord{\left#1{#2}\right#3}}
\newcommand*{\commacat}[2]{\ordlr({#1 \mathbin{\downarrow} #2})}
\newcommand*{\cocommacat}[2]{\ordlr({#1 \mathbin{\uparrow} #2})}
%\newcommand*{\isocommacat}[2]{\ordlr({#1 \mathbin{\wr} #2})}
\newcommand*{\isocommacat}[2]{\ordlr({#1 \mathbin{\subb{\downarrow}{\iso}} #2})}

\newcommand{\walkarr}{\mathbbm{2}} % uses bbm package
\newcommand{\comma}[1]{\ordlr({#1 \mathbin{\downarrow} #1})}
\newcommand{\arrw}[1]{#1^{\raisemath{2pt}{\downarrow}
}}
\newcommand{\arrcat}[1]{#1^{\raisemath{2pt}{\downarrow}
}}
\newcommand{\commath}[1]{#1^{\raisemath{2pt}{\to}
}}
\newcommand{\doublecomma}[1]{#1^{\raisemath{2pt}{\to\to}}}
\newcommand{\cocomma}[1]{\ordlr({#1 \mathbin{\uparrow} #1})}
\newcommand{\commarr}[1]{#1^{\raisemath{2pt}{\dn}}}
\newcommand*{\slicecat}[2]{\bslant{#1}{#2}}
\newcommand*{\overtopos}[2]{\bslant{#1}{#2}}
\newcommand{\oplaxslice}[2]{#1\nearrow #2}
\newcommand{\laxslice}[2]{#1\swarrow #2}
%%%%%%%% declare math operators
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\spectrum}{Spec}
\DeclareMathOperator{\boolidem}{BA_{idem}}
\DeclareMathOperator{\ID}{\mathbf{Id}}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\ob}{Ob}
\DeclareMathOperator{\mor}{Mor}
\DeclareMathOperator{\und}{Und}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Bij}{Bij}
\DeclareMathOperator{\skl}{sk}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\et}{\'et}
\DeclareMathOperator{\lan}{Lan}
\DeclareMathOperator{\ran}{Ran}
\def\Map{\mathop{\mathrm{Map}}\nolimits}

%%%%%% other operators
\newcommand{\Pull}{\ensuremath{\operatorname{Pull}}}
\newcommand{\Push}{\ensuremath{\operatorname{Push}}}
\newcommand{\dom}{\ensuremath{\operatorname{dom}}}
\newcommand{\cod}{\ensuremath{\operatorname{cod}}}
\newcommand{\cdom}{\ensuremath{\mathbf{dom}}}
\newcommand{\ccod}{\ensuremath{\mathbf{cod}}}
\newcommand{\fst}{\ensuremath{\operatorname{\texttt{fst}}}}
\newcommand{\snd}{\ensuremath{\operatorname{\texttt{snd}}}}
\newcommand{\prfst}{\ensuremath{\operatorname{pr_0}}}
\newcommand{\prsnd}{\ensuremath{\operatorname{pr_1}}}
\def\inl{\mathsf{inl}}
\def\inr{\mathsf{inr}}

\newcommand{\Gl}{\ensuremath{\operatorname{Gl}}}
\newcommand{\model}[1]{\ensuremath{#1\operatorname{-\Mod-}}}
\newcommand{\struc}[1]{\ensuremath{#1\operatorname{-\Str-}}}

%%%%%%% for labelling and renaming items simultaneously 
%\usepackage{enumitem}
%***************
\newtheoremstyle{thmstyle}
  {\topsep}
  {\topsep}
  {%\itshape
  \fontfamily{ptm}\selectfont}
  {}
  {\scshape\color{schoolcol}}
  {.}
  {.5em}
  {}
\theoremstyle{thmstyle}
\newtheorem{thm}{\textsc{Theorem}}[section]
\newtheorem{defn}[thm]{\textsc{Definition}}
\newtheorem{lem}[thm]{\textsc{Lemma}}
\newtheorem{cor}[thm]{\textsc{Corollary}}
\newtheorem{prop}[thm]{\textsc{Proposition}}
\newtheorem{conj}[thm]{\textsc{Conjecture}}
\newtheorem{cons}[thm]{\textsc{Construction}}
\newtheorem{rem}[thm]{\textsc{Remark}}
\newtheorem{remark}[thm]{\textsc{Remark}}
\newtheorem{ex}[thm]{\textsc{Example}}
%\newtheorem*{app-proof}{\textsc{Proof}}
%\newtheorem*{note}{\textsc{Note}}
%\newtheorem*{sk-proof}{\textsc{Sketch of proof}}
%\newtheorem*{nom}{\textsc{Nomenclature}}
%\newtheorem*{prin}{\textsc{Principle}}
%**************
% \newtheoremstyle{defnstyle}
%   {\topsep}
%   {\topsep}
%   {}
%   {}
%   {\scshape\color{schoolcol}}
%   {.}
%   {.5em}
%   {}
% \theoremstyle{defnstyle}
% \newtheorem{remark}[defn]{\textsc{Remark}}



\newcommand*{\smashsp}[2]{{#1}\sp{\smash{#2}}}
%%%%%%%%%% MISCELLANEOUS SYMBOLS
\newcommand*{\op}[1]{\smashsp{#1}{\mathrm{op}}}
\newcommand*{\co}[1]{\smashsp{#1}{\mathrm{co}}}
\newcommand*{\Co}[1]{\smashsp{#1}{\mathfrak{co}}}
\newcommand*{\coop}[1]{\smashsp{#1}{\mathrm{coop}}}

%%%% shorthand for adjunction, tensor, composition, etc
\let\tensor\otimes
\newcommand{\nicetensor}[2]{\mathop{\tensor}\limits_{\substack{#1}}#2}
\newcommand{\oo}{\circ}
\newcommand{\adj}{\dashv}
\newcommand{\pr}{^\prime}
\newcommand{\dn}{\downarrow}
\newcommand{\trm}{\mathbbm{1}}           % uses bbm package
\newcommand{\sub}[2]{{#1}_{\raisemath{-2pt}{#2}}}
\newcommand{\sups}[2]{#1^{\raisemath{2pt}{#2}}}
\newcommand{\supsc}[2]{#1^{\raisemath{2pt}{{} #2}}}
\newcommand{\supsub}[3]{#1^{\raisemath{2pt}{#2}}_{\raisemath{-2pt}{#3}}}
\newcommand{\subb}[2]{#1_{\raisemath{-4pt}{#2}}}
\newcommand{\pair}[2]{(#1, #2)}
\newcommand{\triad}[3]{(#1, #2, #3)}
\newcommand{\quartet}[4]{(#1, #2, #3, #4)}
\newcommand{\uniple}[1]{\lang #1 \rang}
\newcommand{\tuple}[2]{\lang #1, #2 \rang}
\newcommand{\trple}[3]{\lang #1, #2, #3 \rang}
\newcommand{\quple}[4]{\lang #1, #2, #3, #4 \rang}
\newcommand{\revtuple}[2]{\lang #2, #1 \rang}
\newcommand{\inc}{\ensuremath{\mathrm{Inc}}}
\newcommand{\pt}{\textsl{pt}}
\newcommand{\props}{\textsl{Prop}}
\newcommand{\intvl}{\mathbb{I}}
\newcommand{\str}[1]{{#1}^{\star}}
\newcommand{\eqv}{\simeq}
\newcommand{\noteqv}{\not\simeq}
\newcommand{\defeq}{\ensuremath{\mathrel{:=}}}
\newcommand{\isdef}{\equiv}
\newcommand{\iso}{\cong}
\newcommand{\notiso}{\ncong}
\newcommand{\alg}[1]{\mathfrak{#1}}
\renewcommand{\dot}{\centerdot}
\newcommand{\hdbcmp}{\boxbar}
\newcommand{\vdbcmp}{\boxminus}
%\newcommand{\hdbcmp}{\odot}
%\newcommand{\hdbcmp}{\boxslash}
\newcommand{\arr}[1]{#1^{\bb{2}}}
\newcommand{\altil}{\ensuremath{\widetilde{\alpha}}}
\newcommand{\betil}{\ensuremath{\widetilde{\beta}}}
\newcommand{\lang}{\langle}
\newcommand{\rang}{\rangle}
\newcommand{\bottom}{\bot}
\newcommand{\name}[1]{\ulcorner#1\urcorner} 
\newcommand{\san}[1]{\ensuremath{\mathsf{#1}}} %%sansmath letters
\newcommand{\sem}[2]{\ensuremath{\llbracket #2 \rrbracket}_{#1}}
\newcommand{\Prod}[2]{\mathop{\prod}\limits_{\substack{#1}}#2}
\newcommand{\coProd}[2]{\mathop{\coprod}\limits_{\substack{#1}}#2}
\newcommand{\clim}[2]{\mathop{\lim}\limits_{\substack{#1}}#2}
\newcommand{\ccolim}[2]{\mathop{\mathrm{colim}}\limits_{\substack{#1}}#2}
\newcommand{\nicesum}[2]{\mathop{\Sigma}\limits_{\substack{#1}}#2}
%% new greek letters
\newcommand{\ep}{\ensuremath{\varepsilon}}
\newcommand{\ph}{\ensuremath{\varphi}}

%%%%%%%
\newdir{ >}{{}*!/-10pt/@{>}}
\newdir{ |}{{}*!/-10pt/@{|}}
\newdir{> }{!/10pt/@{>}*{}}
\makeatletter
\newdimen\itex@wd%
\newdimen\itex@dp%
\newdimen\itex@thd%
\def\itexspace#1#2#3{\itex@wd=#3em%
\itex@wd=0.1\itex@wd%
\itex@dp=#2ex%
\itex@dp=0.1\itex@dp%
\itex@thd=#1ex%
\itex@thd=0.1\itex@thd%
\advance\itex@thd\the\itex@dp%
\makebox[\the\itex@wd]{\rule[-\the\itex@dp]{0cm}{\the\itex@thd}}}
\makeatother


%%%%%  mybox environ
%% Illumination
\usepackage[tikz]{bclogo}
\usepackage{blindtext}
\usepackage[skins,breakable,xparse]{tcolorbox}
\DeclareTotalTColorBox[auto counter]{\ilum}{ O{} m }
{ enhanced,breakable,
  boxrule=0pt,boxsep=0pt,arc=2mm,toptitle=3mm,top=3mm,left=7mm,right=1mm,pad at break=2mm,
  colframe=Gainsboro,interior hidden,
  coltitle=black,fonttitle=\bfseries\large,title={ %~\thetcbcounter
  },
  overlay unbroken and first={\node at ([xshift=4mm,yshift=-5mm]frame.north west) {\bclampe};},
  #1}
  {\raggedright #2}
  
  

% Warning
\usepackage{scalerel}
\newcommand\dangersign[1][2ex]{%
  \renewcommand\stacktype{L}%
  \scaleto{\stackon[1.3pt]{\color{red}$\triangle$}{\tiny !}}{#1}%
}

\DeclareTotalTColorBox[auto counter]{\warn}{ O{} m }
{ enhanced,breakable,
  boxrule=0pt,boxsep=0pt,arc=2mm,toptitle=3mm,top=3mm,left=7mm,
right=1mm,pad at break=2mm,
  colframe=blue!20!white,fonttitle=\bfseries\large,interior hidden,
  coltitle=black,title={ %~\thetcbcounter
  },
  overlay unbroken and first={\node at ([xshift=4mm,yshift=-5mm]frame.north west) {\textbf{\dangersign[3.5ex]} \ };},
  #1}
  {\raggedright #2}
  

% https://tex.stackexchange.com/questions/45404/asymmetric-cloud-shape-in-tikz
\newcommand{\asymcloud}[2][.1]{%
\begin{scope}[#2]
\pgftransformscale{#1}%    
\pgfpathmoveto{\pgfpoint{261 pt}{115 pt}} 
  \pgfpathcurveto{\pgfqpoint{70 pt}{107 pt}}
                 {\pgfqpoint{137 pt}{291 pt}}
                 {\pgfqpoint{260 pt}{273 pt}} 
  \pgfpathcurveto{\pgfqpoint{78 pt}{382 pt}}
                 {\pgfqpoint{381 pt}{445 pt}}
                 {\pgfqpoint{412 pt}{410 pt}}
  \pgfpathcurveto{\pgfqpoint{577 pt}{587 pt}}
                 {\pgfqpoint{698 pt}{488 pt}}
                 {\pgfqpoint{685 pt}{366 pt}}
  \pgfpathcurveto{\pgfqpoint{840 pt}{192 pt}}
                 {\pgfqpoint{610 pt}{157 pt}}
                 {\pgfqpoint{610 pt}{157 pt}}
  \pgfpathcurveto{\pgfqpoint{531 pt}{39 pt}}
                 {\pgfqpoint{298 pt}{51 pt}}
                 {\pgfqpoint{261 pt}{115 pt}}
\pgfusepath{fill,stroke}         
\end{scope}}    
  
\newcommand{\rmk}[1]{\begin{rem} #1 \end{rem}}  
\newcommand{\what}{{\color{red}{(what?)}}}
\newcommand{\why}{{\color{red}{(why?)}}}
\newcommand{\where}{{\color{red}{(where?)}}}
\newcommand{\todo}[1]{{\color{red}{Todo: (#1)}}}
\newcommand{\how}{{\color{red}{(how?)}}}
\newtheorem*{caveat}{\textsc{Caveat}}
\newcounter{Jcomment}
\newcommand{\Jcomment}[1]{{[$\spadesuit$\stepcounter{Jcomment}\arabic{Jcomment}:\textcolor{orange}{ #1}$\spadesuit $]}}

\newcommand{\dirsup}[1][]{%
    \mathbin{\tikz [x=1.4ex,y=1.6ex,line width=.15ex,baseline] 
        \draw [->,#1] (0,1) -- (0.5,0) -- (1,1.25);
    }%
}

% brackets on the right for explanation
\makeatletter
\newdimen\itex@wd%
\newdimen\itex@dp%
\newdimen\itex@thd%
\def\itexspace#1#2#3{\itex@wd=#3em%
\itex@wd=0.1\itex@wd%
\itex@dp=#2ex%
\itex@dp=0.1\itex@dp%
\itex@thd=#1ex%
\itex@thd=0.1\itex@thd%
\advance\itex@thd\the\itex@dp%
\makebox[\the\itex@wd]{\rule[-\the\itex@dp]{0cm}{\the\itex@thd}}}
\makeatother


\RequirePackage{graphicx}
\usepackage{multicol}
% Change the colours if you want to

\definecolor{SlateGrey}{HTML}{2E2E2E}
\definecolor{LightGrey}{HTML}{666666}
\definecolor{SimpleGrey}{HTML}{808080}
\definecolor{RegentGrey}{HTML}{808C99}
\definecolor{Silver}{HTML}{C0C0C0}
\definecolor{Gainsboro}{HTML}{DCDCDC}
\definecolor{DarkGrey}{HTML}{A9A9A9}
	

\definecolor{NavyBlue}{HTML}{000080}
\definecolor{VividPurple}{HTML}{3E0097}
\definecolor{Patina}{HTML}{699000}
\definecolor{Venus}{HTML}{998099}
\definecolor{Hopbush}{HTML}{C69000}
\definecolor{Bouquet}{HTML}{B37399}
\definecolor{MyRed}{HTML}{6B0F24}
\definecolor{MyRed2}{HTML}{BA2026}
\definecolor{MyRed3}{HTML}{a01a1f}
\definecolor{Aqua}{HTML}{00FFFF}
\definecolor{MedBlue}{HTML}{0000CD}
\definecolor{RoyalBlue}{HTML}{4169E1}
\definecolor{CornflowerBlue}{HTML}{6495ED}
\definecolor{deStijlYellow}{HTML}{FDED01}
\definecolor{deStijlBlue}{HTML}{1F7FC9}
\definecolor{deStijlRed}{HTML}{F60201}
\definecolor{deStijlWhite}{HTML}{FEFFFA}
\definecolor{oranje}{HTML}{FFA500}
\definecolor{nlblue}{HTML}{21468B}
\definecolor{utrechtBlue}{HTML}{5bbad5}
\definecolor{utrechtYellow}{HTML}{ffcd00}
